---
/**
 * Button.astro
 * Reusable button/link component with multiple variants and sizes.
 *
 * Props:
 *   href?      — renders as <a> when provided, otherwise <button>
 *   variant    — 'primary' | 'secondary' | 'outline' (default: 'primary')
 *   size       — 'sm' | 'md' | 'lg' (default: 'md')
 *   type?      — button type attribute ('button' | 'submit' | 'reset')
 *   disabled?  — disables the element
 *   class?     — additional classes to merge
 *   ...rest    — any other HTML attributes passed through
 */

interface Props {
  href?: string;
  variant?: 'primary' | 'secondary' | 'outline';
  size?: 'sm' | 'md' | 'lg';
  type?: 'button' | 'submit' | 'reset';
  disabled?: boolean;
  class?: string;
  [key: string]: unknown;
}

const {
  href,
  variant = 'primary',
  size = 'md',
  type = 'button',
  disabled = false,
  class: className = '',
  ...rest
} = Astro.props;

const variantClasses: Record<NonNullable<Props['variant']>, string> = {
  primary:
    'bg-brand-500 hover:bg-brand-400 text-white shadow-lg shadow-brand-500/25 hover:shadow-brand-400/35',
  secondary:
    'bg-surface-800 hover:bg-surface-700 text-text-primary border border-surface-600 hover:border-surface-500',
  outline:
    'bg-transparent border border-brand-500/60 hover:border-brand-400 text-brand-400 hover:text-brand-300 hover:bg-brand-500/5',
};

const sizeClasses: Record<NonNullable<Props['size']>, string> = {
  sm: 'px-4 py-2 text-xs',
  md: 'px-6 py-3 text-sm',
  lg: 'px-8 py-4 text-base',
};

const baseClasses =
  'inline-flex items-center justify-center gap-2 rounded-pill font-semibold transition-all duration-200 hover:-translate-y-0.5 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-brand-500/60 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:translate-y-0';

const classes = [baseClasses, variantClasses[variant], sizeClasses[size], className]
  .filter(Boolean)
  .join(' ');

---

{href ? (
  <a
    href={href}
    class={classes}
    {...rest}
  >
    <slot />
  </a>
) : (
  <button
    type={type}
    disabled={disabled}
    class={classes}
    {...rest}
  >
    <slot />
  </button>
)}
